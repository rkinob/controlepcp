<!-- Overlay para mobile -->
<div class="navbar-overlay" [class.active]="isMenuOpen" (click)="closeMenu()"></div>

<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand">
      <a routerLink="/ordem-producao" class="brand-link">
        <span class="brand-icon">ğŸ­</span>
        <span class="brand-text">Controle PCP</span>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Navigation Menu -->
    <div class="navbar-menu" [class.active]="isMenuOpen">
      <ul class="navbar-nav">
        <!-- Menu Cadastro -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('cadastro')"
             (click)="toggleSubmenu('cadastro', $event)">
            <span>
              <span class="nav-icon">ğŸ“</span>
              <span class="nav-text">Cadastro</span>
            </span>
            <span class="submenu-arrow">â–¼</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('cadastro')">
            <li class="submenu-item">
              <a routerLink="/modelo-peca"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/modelo-peca')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ“¦</span>
                <span class="nav-text">Modelos de PeÃ§a</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/grupo-producao"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/grupo-producao')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ‘¥</span>
                <span class="nav-text">Grupos de ProduÃ§Ã£o</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/usuario"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/usuario')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-text">UsuÃ¡rios</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/config-aprovadores"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/config-aprovadores')"
                 (click)="closeMenu()">
                <span class="nav-icon">âš™ï¸</span>
                <span class="nav-text">Config. Aprovadores</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/empresa"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/empresa')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ¢</span>
                <span class="nav-text">Empresas</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/cliente"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/cliente')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ¤</span>
                <span class="nav-text">Clientes</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menu OPs -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('ops')"
             (click)="toggleSubmenu('ops', $event)">
            <span>
              <span class="nav-icon">ğŸ“‹</span>
              <span class="nav-text">OPs</span>
            </span>
            <span class="submenu-arrow">â–¼</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('ops')">
            <li class="submenu-item">
              <a routerLink="/ordem-producao"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/ordem-producao')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ“‹</span>
                <span class="nav-text">Ordens de ProduÃ§Ã£o</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/op-programada"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/op-programada')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ“…</span>
                <span class="nav-text">OPs Programadas</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/aprovacao-hora-extra"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/aprovacao-hora-extra')"
                 (click)="closeMenu()">
                <span class="nav-icon">â°</span>
                <span class="nav-text">Aprovar Hora Extra</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menu RelatÃ³rios -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('relatorios')"
             (click)="toggleSubmenu('relatorios', $event)">
            <span>
              <span class="nav-icon">ğŸ“Š</span>
              <span class="nav-text">RelatÃ³rios</span>
            </span>
            <span class="submenu-arrow">â–¼</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('relatorios')">
            <li class="submenu-item">
              <a routerLink="/relatorio-calendario"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/relatorio-calendario')"
                 (click)="closeMenu()">
                <span class="nav-icon">ğŸ“…</span>
                <span class="nav-text">RelatÃ³rio de OPS</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- User Menu -->
      <div class="navbar-user">
        <div class="user-info">
          <span class="user-name">{{ currentUser?.nome_usuario || 'UsuÃ¡rio' }}</span>
          <span class="user-role">Sistema</span>
        </div>
        <button class="logout-btn" (click)="onLogout()" title="Sair">
          <span class="logout-icon">ğŸšª</span>
        </button>
      </div>
    </div>
  </div>
</nav>
