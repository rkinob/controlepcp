<!-- Overlay para mobile -->
<div class="navbar-overlay" [class.active]="isMenuOpen" (click)="closeMenu()"></div>

<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand">
      <a routerLink="/ordem-producao" class="brand-link">
        <span class="brand-icon">üè≠</span>
        <span class="brand-text">Controle PCP</span>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Navigation Menu -->
    <div class="navbar-menu" [class.active]="isMenuOpen">
      <ul class="navbar-nav">
        <!-- Menu Cadastro -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('cadastro')"
             (click)="toggleSubmenu('cadastro', $event)">
            <span>
              <span class="nav-icon">üìÅ</span>
              <span class="nav-text">Cadastro</span>
            </span>
            <span class="submenu-arrow">‚ñº</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('cadastro')">
            <li class="submenu-item">
              <a routerLink="/modelo-peca"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/modelo-peca')"
                 (click)="closeMenu()">
                <span class="nav-icon">üì¶</span>
                <span class="nav-text">Modelos de Pe√ßa</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/grupo-producao"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/grupo-producao')"
                 (click)="closeMenu()">
                <span class="nav-icon">üë•</span>
                <span class="nav-text">Grupos de Produ√ß√£o</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/usuario"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/usuario')"
                 (click)="closeMenu()">
                <span class="nav-icon">üë§</span>
                <span class="nav-text">Usu√°rios</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/config-aprovadores"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/config-aprovadores')"
                 (click)="closeMenu()">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-text">Config. Aprovadores</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menu OPs -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('ops')"
             (click)="toggleSubmenu('ops', $event)">
            <span>
              <span class="nav-icon">üìã</span>
              <span class="nav-text">OPs</span>
            </span>
            <span class="submenu-arrow">‚ñº</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('ops')">
            <li class="submenu-item">
              <a routerLink="/ordem-producao"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/ordem-producao')"
                 (click)="closeMenu()">
                <span class="nav-icon">üìã</span>
                <span class="nav-text">Ordens de Produ√ß√£o</span>
              </a>
            </li>
            <li class="submenu-item">
              <a routerLink="/aprovacao-hora-extra"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/aprovacao-hora-extra')"
                 (click)="closeMenu()">
                <span class="nav-icon">‚è∞</span>
                <span class="nav-text">Aprovar Hora Extra</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menu Relat√≥rios -->
        <li class="nav-item has-submenu">
          <a class="nav-link"
             [class.active]="isSubmenuOpen('relatorios')"
             (click)="toggleSubmenu('relatorios', $event)">
            <span>
              <span class="nav-icon">üìä</span>
              <span class="nav-text">Relat√≥rios</span>
            </span>
            <span class="submenu-arrow">‚ñº</span>
          </a>
          <ul class="submenu" [class.show]="isSubmenuOpen('relatorios')">
            <li class="submenu-item">
              <a routerLink="/relatorio-calendario"
                 class="submenu-link"
                 [class.active]="isActiveRoute('/relatorio-calendario')"
                 (click)="closeMenu()">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-text">Relat√≥rio de OPS</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- User Menu -->
      <div class="navbar-user">
        <div class="user-info">
          <span class="user-name">{{ currentUser?.nome_usuario || 'Usu√°rio' }}</span>
          <span class="user-role">Sistema</span>
        </div>
        <button class="logout-btn" (click)="onLogout()" title="Sair">
          <span class="logout-icon">üö™</span>
        </button>
      </div>
    </div>
  </div>
</nav>
